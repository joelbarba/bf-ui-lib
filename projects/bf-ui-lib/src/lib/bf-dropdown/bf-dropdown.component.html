<div class="form-group bf-dropdown-form-group"
     (keydown)="triggerKey($event)"
     [class.is-required]="bfRequired"
     [class.is-disabled]="bfDisabled"
     [class.is-focus]="isFocus || isExpanded"
     [class.is-error]="isInvalid && (!ngControl.pristine || bfErrorOnPristine)">

  <label *ngIf="!!bfLabel" [class.is-required]="bfRequired">
    <span class="info-badge" *ngIf="!!bfTooltip"
         [ngbTooltip]="bfTooltipTrans$ | async" [placement]="bfTooltipPos" triggers="hover"
         [container]="(bfTooltipBody ? 'body' : '')">
      <span class="icon-info"></span>
    </span>
    <span>{{bfLabelTrans$ | async}}</span>:
    <span *ngIf="bfRequired" class="asterisk">*</span>
  </label>

  <div class="bf-dropdown" [class.is-expanded]="isExpanded">
    <div class="input-group"
         [disableTooltip]="!bfDisabled || !bfDisabledTip"
         [ngbTooltip]="bfDisabledTipTrans$ | async">

      <input type="text" class="form-control" #dropdownInput
             [ngModel]="inputText" (ngModelChange)="filterList($event)"
             [class.has-image]="!!bfModel?.$img"
             [class.has-icon]="!!bfModel?.$icon"
             [placeholder]="selModelText"
             [disabled]="bfDisabled"
             (focusin)="expandList()"
             (focusout)="collapseList()">

      <img *ngIf="!!bfModel?.$img" class="input-image" [class.fade]="isExpanded" [src]="bfModel?.$img">

      <span *ngIf="bfModel?.$icon && !bfModel?.$img" class="input-icon" [class.fade]="isExpanded"
            [ngClass]="bfModel?.$icon">
      </span>

      <div class="input-group-append" (click)="!bfDisabled && onInputBtnClick()">
        <button class="btn btn-outline-secondary" [disabled]="bfDisabled ? 'true' : ''">
          <span class="icon-arrow-down22"></span>
        </button>
      </div>
    </div>

    <div class="list-container">
      <div *ngFor="let item of extList" class="option-row"
           [class.selected]="bfModel === item"
           [hidden]="!item.$isMatch"
           (mousedown)="selectItem(item)">
        <img *ngIf="!!item?.$img"  class="option-row-image" [src]="item?.$img">
        <span *ngIf="!!item?.$icon" class="option-row-icon" [ngClass]="item?.$icon"></span>
        <span>{{item.$renderedText}}</span>
<!--        {{option.$isMatch}} - {{option.$renderedText}}-->
      </div>
    </div>
  </div>

  <!--pristine={{ngControl.pristine | json}}-->
  <!--bfModel={{bfModel | json}}-->

</div>
