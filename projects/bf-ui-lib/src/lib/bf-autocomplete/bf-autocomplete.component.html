<div class="form-group bf-autocomplete-form-group" #autocomplete
     (keydown)="triggerKey($event)"
     [class.is-required]="bfRequired"
     [class.is-disabled]="bfDisabled"
     [class.is-focus]="isFocus || isExpanded"
     [class.is-error]="isInvalid && (!ngControl.pristine || bfErrorOnPristine)">

  <bf-label *ngIf="!!bfLabel"
            [bfText]="bfLabel"
            [bfRequired]="bfRequired"
            [bfTooltip]="bfTooltip"
            [bfTooltipPos]="bfTooltipPos"
            [bfTooltipBody]="bfTooltipBody">
  </bf-label>

  <div class="bf-autocomplete"
       [class.is-expanded]="isExpanded">
    <div class="input-group" #autocompleteInputGroup
         [disableTooltip]="!bfDisabled || !bfDisabledTip"
         [ngbTooltip]="bfDisabledTipTrans$ | async">

      <input type="text" class="form-control" #autocompleteInput
             [(ngModel)]="ngModel" (ngModelChange)="typing(ngModel)"
             [placeholder]="navigatedItem || (bfPlaceholderTrans$ | async)"
             [disabled]="bfDisabled"
             (focusin)="expand()"
             (blur)="updateModel(ngModel)"
             autocomplete="nofill">


      <div class="input-group-append">
        <button [hidden]="(!!ngModel && ngModel.length > 0) && isExpanded"
                class="btn btn-outline-secondary" tabIndex="-1"
                [disabled]="bfDisabled"
                (click)="!bfDisabled && toggle()">
          <span class="icon-search"></span>
        </button>
        <button [hidden]="(!ngModel || ngModel.length === 0) || !isExpanded"
                class="btn btn-outline-secondary" tabIndex="-1"
                (click)="reset()">
          <span class="icon-cross3"></span>
        </button>
      </div>

    </div>

    <div class="list-container" #listContainer>
      <div *ngFor="let item of list" class="option-row {{item}}"
           [class.selected]="isHighlighted(item)"
           (mousedown)="select(item);">
        <span>{{item}}</span>
      </div>
    </div>

  </div>
</div>
